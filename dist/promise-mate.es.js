import t from"fast-deep-equal";import e from"just-is-primitive";function r(r,n){var i=-1;if(e(n))i=r.indexOf(n);else for(var o=0;o<r.length;o++)if(t(r[o],n)){i=o;break}return-1===i&&r.push(n),-1===i?r.length-1:i}var n=function(t){void 0===t&&(t={}),this.definitions=t};n.prototype.define=function(t,e){return this.definitions[t]=e,this},n.prototype.undefine=function(t){return delete this.definitions[t],this},n.prototype.all=function(t){return n.all(this.definitions,t)},n.all=function(t,e){for(var n=[],i=[],o=0,a=e;o<a.length;o+=1){var f=a[o];if(actionMap=[],Array.isArray(f.requires))for(var s=0,u=f.requires;s<u.length;s+=1){actionMap.push(r(n,u[s]))}else actionMap.push(r(n,f.requires));i.push(actionMap)}for(var p=[],h=0,l=n;h<l.length;h+=1){var c=l[h];"string"==typeof c&&t.hasOwnProperty(c)?p.push(t[c]()):p.push(c)}return Promise.all(p).then(function(t){for(var r=[],n=0;n<e.length;n++){for(var o=e[n],a=[],f=0,s=i[n];f<s.length;f+=1){a.push(t[s[f]])}r.push("function"==typeof o.then?o.then.apply(o,a):o.then)}return r})};export default n;
//# sourceMappingURL=promise-mate.es.js.map
