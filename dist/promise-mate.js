function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("fast-deep-equal")),n=e(require("just-is-primitive"));function r(e,r){var i=-1;if(n(r))i=e.indexOf(r);else for(var o=0;o<e.length;o++)if(t(e[o],r)){i=o;break}return-1===i&&e.push(r),-1===i?e.length-1:i}var i=function(e){void 0===e&&(e={}),this.definitions=e};i.prototype.define=function(e,t){return this.definitions[e]=t,this},i.prototype.undefine=function(e){return delete this.definitions[e],this},i.prototype.all=function(e){return i.all(this.definitions,e)},i.all=function(e,t){for(var n=[],i=[],o=0,u=t;o<u.length;o+=1){var a=u[o];if(actionMap=[],Array.isArray(a.requires))for(var f=0,s=a.requires;f<s.length;f+=1){actionMap.push(r(n,s[f]))}else actionMap.push(r(n,a.requires));i.push(actionMap)}for(var p=[],h=0,l=n;h<l.length;h+=1){var c=l[h];"string"==typeof c&&e.hasOwnProperty(c)?p.push(e[c]()):p.push(c)}return Promise.all(p).then(function(e){for(var n=[],r=0;r<t.length;r++){for(var o=t[r],u=[],a=0,f=i[r];a<f.length;a+=1){u.push(e[f[a]])}n.push("function"==typeof o.then?o.then.apply(o,u):o.then)}return n})},module.exports=i;
//# sourceMappingURL=promise-mate.js.map
